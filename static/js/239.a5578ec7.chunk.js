"use strict";(self.webpackChunktodo_react_fp=self.webpackChunktodo_react_fp||[]).push([[239],{4239:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var r=n(4165),i=n(5861),s=n(9439),l=n(7313),o=n(3709),a=n(4990),c=n(177),d=function(){return(0,o.I0)()},u=o.v9,f=n(4335),v=n(6417),x=function(){return(0,v.jsxs)("div",{"data-testid":"toolbar",className:"w-full flex justify-between items-center bg-bg-gray1 border-b border-solid border-border-gray1 h-11",children:[(0,v.jsx)("div",{className:"pl-8 py-4",children:(0,v.jsx)("div",{className:"text-title-1 text-primary-blue",children:"TodoLists"})}),(0,v.jsx)("div",{})]})},m=n(1413),h=n(627),p=n(6155),j=n(7208),Z=function(){return(0,v.jsx)("svg",{viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",className:"reminder-list-icon",children:(0,v.jsx)("path",{d:"M18.344 25.056a2.579 2.579 0 002.57-2.57c0-1.414-1.157-2.586-2.57-2.586-1.413 0-2.57 1.172-2.57 2.585a2.579 2.579 0 002.57 2.57zm28.018-.707a1.854 1.854 0 001.864-1.864 1.845 1.845 0 00-1.864-1.864H26.175a1.845 1.845 0 00-1.863 1.864c0 1.037.811 1.864 1.863 1.864h20.187zM18.344 34.57a2.579 2.579 0 002.57-2.57 2.579 2.579 0 00-2.57-2.57 2.579 2.579 0 00-2.57 2.57 2.579 2.579 0 002.57 2.57zm28.018-.706A1.845 1.845 0 0048.226 32a1.845 1.845 0 00-1.864-1.864H26.175A1.845 1.845 0 0024.312 32c0 1.037.811 1.864 1.863 1.864h20.187zM18.344 44.1a2.579 2.579 0 002.57-2.57c0-1.413-1.157-2.586-2.57-2.586-1.413 0-2.57 1.173-2.57 2.586a2.579 2.579 0 002.57 2.57zm28.018-.706a1.854 1.854 0 001.864-1.864 1.845 1.845 0 00-1.864-1.864H26.175a1.845 1.845 0 00-1.863 1.864c0 1.037.811 1.864 1.863 1.864h20.187z",fill:"#fff",fillRule:"nonzero"})})},g=n(2290),w=function(e){var t,n,r=e.id,i=e.title,c=e.todoAmount,d=(e.icon,(0,l.useState)(c)),u=(0,s.Z)(d,2),f=u[0],x=u[1],m=a.Z.endpoints.getListById.select(r),h=(0,o.v9)(m),p=null===h||void 0===h||null===(t=h.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.todos.length;return(0,l.useEffect)((function(){"number"===typeof p&&x(p)}),[p]),(0,v.jsx)("div",{className:"todo-list-menu-item pl-3 h-[3.5rem] flex items-center",role:"listbox",children:(0,v.jsxs)("div",{className:"todo-list-menu-item-content flex items-center w-full",children:[(0,v.jsx)("div",{className:"min-w-[2rem] min-h-[2rem] bg-icon-blue1 rounded-full",children:(0,v.jsx)(Z,{})}),(0,v.jsxs)("div",{className:"content-wrap w-full ml-4 flex items-center justify-between",children:[(0,v.jsx)("div",{className:"title-container",children:(0,v.jsx)("div",{className:"title",children:(0,v.jsx)("div",{className:"inline-editable",children:(0,v.jsx)("div",{className:"inline-editable-label text-title-3",role:"textbox",children:i})})})}),(0,v.jsx)("div",{className:"count mr-5",children:f})]})]})})},N=function(e){var t=e.isError,n=e.isLoading,r=e.data,i=d(),o=u((function(e){return e.list})).selectedListId,c=u((function(e){return e.todo})).mode,x=a.Z.useLazyGetListByIdQuery(),Z=(0,s.Z)(x,1)[0];return(0,l.useEffect)((function(){var e,t;!o&&null!==r&&void 0!==r&&null!==(e=r[0])&&void 0!==e&&e.id&&c===g.Z.NORMAL&&i((0,j.cO)(null===r||void 0===r||null===(t=r[0])||void 0===t?void 0:t.id))}),[r]),(0,v.jsx)("div",{className:"scrollable-area px-3 pt-3",children:(0,v.jsx)("div",{className:"todo-list-menu rounded-[12px] overflow-hidden bg-bg-white1",role:"menu",children:t?(0,v.jsx)(v.Fragment,{children:"Oh no, there was an error"}):n?(0,v.jsx)("div",{className:"p-6",children:(0,v.jsx)(h.Z,{active:!0})}):null!==r&&void 0!==r&&r.length?null===r||void 0===r?void 0:r.map((function(e,t){return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{onClick:function(){c===g.Z.SEARCH&&i((0,f.PM)(g.Z.NORMAL)),i((0,j.cO)(e.id)),Z(e.id)},"data-selected":c===g.Z.NORMAL&&o===e.id,children:(0,v.jsx)(w,(0,m.Z)({},e))}),(null===r||void 0===r?void 0:r.length)!==t+1&&(0,v.jsx)(p.Z,{className:"m-0 ml-6"})]},e.id)})):(0,v.jsx)(v.Fragment,{})})})},b=n(3433),y=n(4925),C=n(4214),L=function(e){var t=e.fill;return(0,v.jsx)("svg",{viewBox:"0 0 80.567626953125 80.6142578125",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"rm-new-reminder-icon glyph-box","aria-hidden":"true",fill:t,children:(0,v.jsx)("g",{transform:"matrix(1 0 0 1 -12.4511572265626 75.537109375)",children:(0,v.jsx)("path",{d:"M12.4512-35.2539C12.4512-32.8613 14.4531-30.9082 16.7969-30.9082L48.3887-30.9082L48.3887 0.683594C48.3887 3.02734 50.3418 5.0293 52.7344 5.0293C55.127 5.0293 57.1289 3.02734 57.1289 0.683594L57.1289-30.9082L88.6719-30.9082C91.0156-30.9082 93.0176-32.8613 93.0176-35.2539C93.0176-37.6465 91.0156-39.6484 88.6719-39.6484L57.1289-39.6484L57.1289-71.1914C57.1289-73.5352 55.127-75.5371 52.7344-75.5371C50.3418-75.5371 48.3887-73.5352 48.3887-71.1914L48.3887-39.6484L16.7969-39.6484C14.4531-39.6484 12.4512-37.6465 12.4512-35.2539Z"})})})},k=function(e){var t=e.title,n=void 0===t?"list title":t,r=e.plusButtonDisabled,i=void 0!==r&&r,s=e.onPlusClick,l=void 0===s?function(){}:s,o=(e.onMoreClick,u((function(e){return e.todo})).mode);return(0,v.jsxs)("div",{"data-testid":"todoListHeader",className:"flex justify-between items-center pl-6 pr-5 h-[3.125rem]",children:[(0,v.jsx)("div",{className:"text-title-2 text-primary-blue h-[2.625rem]",children:n}),(0,v.jsx)("div",{className:"right-wrap",children:o===g.Z.NORMAL&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(C.Z,{className:"mr-6",size:"small",shape:"circle",type:"text",disabled:i,"data-disabled":i,icon:(0,v.jsx)(L,{fill:"#0071EB"}),onClick:l})})})]})},E=n(2516),M=n(1829),B=function(e){var t=e.fill;return(0,v.jsx)("svg",{viewBox:"0 0 99.6099853515625 99.6572265625",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"glyph-box",role:"presentation",fill:t,children:(0,v.jsx)("g",{transform:"matrix(1 0 0 1 -8.740039062500045 85.05859375)",children:(0,v.jsx)("path",{d:"M58.5449 14.5508C85.791 14.5508 108.35-8.05664 108.35-35.2539C108.35-62.5 85.7422-85.0586 58.4961-85.0586C31.2988-85.0586 8.74023-62.5 8.74023-35.2539C8.74023-8.05664 31.3477 14.5508 58.5449 14.5508ZM58.5449 6.25C35.498 6.25 17.0898-12.207 17.0898-35.2539C17.0898-58.3008 35.4492-76.7578 58.4961-76.7578C81.543-76.7578 100-58.3008 100.049-35.2539C100.098-12.207 81.5918 6.25 58.5449 6.25Z"})})})},R=function(e){var t=e.fill;return(0,v.jsx)("svg",{viewBox:"0 0 99.6099853515625 99.6572265625",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"glyph-box",role:"presentation",fill:t,children:(0,v.jsx)("g",{transform:"matrix(1 0 0 1 -8.740039062500045 85.05859375)",children:(0,v.jsx)("path",{d:"M58.5449 14.5508C85.791 14.5508 108.35-8.05664 108.35-35.2539C108.35-62.5 85.7422-85.0586 58.4961-85.0586C31.2988-85.0586 8.74023-62.5 8.74023-35.2539C8.74023-8.05664 31.3477 14.5508 58.5449 14.5508ZM58.5449 6.25C35.498 6.25 17.0898-12.207 17.0898-35.2539C17.0898-58.3008 35.4492-76.7578 58.4961-76.7578C81.543-76.7578 100-58.3008 100.049-35.2539C100.098-12.207 81.5918 6.25 58.5449 6.25ZM58.4473-1.17188C77.4414-1.17188 92.5781-16.3574 92.5293-35.3027C92.4805-54.1992 77.3438-69.3848 58.3984-69.3848C39.4531-69.3848 24.4141-54.248 24.4141-35.3027C24.4141-16.3086 39.502-1.17188 58.4473-1.17188Z"})})})},A=function(e){var t=e.todo,n=e.onToggle,r=e.onBlur,i=e.onDelete,o=(e.onPressEnter,e.showNewTodo),a=e.className,c=(0,l.useRef)(null),d=(0,l.useState)(t),u=(0,s.Z)(d,2),f=u[0],x=u[1];(0,l.useEffect)((function(){x(t)}),[t]),(0,l.useEffect)((function(){if(o){var e=c.current;null===e||void 0===e||e.focus()}}),[o]);return(0,v.jsx)("div",{"data-testid":"todoItem",tabIndex:0,className:'"rowgroup" '.concat(a),children:(0,v.jsxs)("div",{className:"content flex items-center py-3 pr-5 pl-6 w-full",children:[(0,v.jsxs)("div",{className:"mr-3",children:[(0,v.jsx)(E.Z,{id:f.id,className:"toggle hidden",type:"checkbox",checked:f.completed}),(0,v.jsx)("label",{htmlFor:f.id,onClick:function(){x((function(e){var t=(0,m.Z)((0,m.Z)({},e),{},{completed:!e.completed});return null===n||void 0===n||n(t),t}))},children:(0,v.jsx)("div",{className:"w-[1.375rem] h-[1.375rem]",children:f.completed?(0,v.jsx)(R,{fill:"#0071EB"}):(0,v.jsx)(B,{fill:"#c4c4c6"})})})]}),(0,v.jsx)("div",{className:"todo-item w-full",children:(0,v.jsxs)("div",{className:"flex items-center w-full border-b border-border-gray2",children:[(null===f||void 0===f?void 0:f.priority)&&(0,v.jsx)("div",{children:"!"}),(0,v.jsx)(E.Z,{ref:c,value:f.title,className:"edit w-full text-content-1",bordered:!1,onBlur:function(e){null===r||void 0===r||r((0,m.Z)((0,m.Z)({},f),{},{title:e.target.value}))},onChange:function(e){x((function(t){return(0,m.Z)((0,m.Z)({},t),{},{title:e.target.value})}))},onPressEnter:function(){var e;null===(e=c.current)||void 0===e||e.blur()}}),!o&&(0,v.jsx)("div",{className:"delete-button px-3 py-1 cursor-pointer",onClick:function(){return null===i||void 0===i?void 0:i(f.id)},children:(0,v.jsx)(M.Z,{})})]})})]})})},S=function(e){var t=e.text,n=e.onClick;return(0,v.jsx)("div",{"data-testid":"blank",className:"flex flex-col grow justify-center items-center",onClick:n,children:(0,v.jsx)("div",{children:t})})},T=["id"],z=function(e){var t=e.data,n=e.isError,o=e.isLoading,d=u((function(e){return e.list})).selectedListId,f=u((function(e){return e.todo})).mode,x=(0,l.useState)([]),m=(0,s.Z)(x,2),p=m[0],j=m[1],Z=(0,l.useState)(!1),w=(0,s.Z)(Z,2),N=w[0],C=w[1],L=(0,l.useState)(new Set),E=(0,s.Z)(L,2),M=E[0],B=E[1],R=c.k.useCreateTodoMutation(),z=(0,s.Z)(R,2),I=z[0],O=z[1],F=(O.isLoading,O.isError,c.k.useUpdateTodoMutation()),D=(0,s.Z)(F,2),P=D[0],H=D[1],Q=(H.isLoading,H.isError,c.k.useDeleteTodoMutation()),G=(0,s.Z)(Q,2),_=G[0],U=G[1],q=(U.isLoading,U.isError,a.Z.useLazyGetListByIdQuery()),J=(0,s.Z)(q,1)[0];(0,l.useEffect)((function(){f===g.Z.NORMAL&&d&&J(d)}),[f]),(0,l.useEffect)((function(){j((null===t||void 0===t?void 0:t.todo)||[])}),[t]);var K=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.title.trim()){e.next=3;break}return e.abrupt("return");case 3:return C(!1),e.next=6,I(t);case 6:J(d),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B((function(e){return e.add(t)})),e.next=4,_(t);case 4:J(d),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),X=function(e){P({id:e.id,completed:e.completed})};return(0,v.jsxs)("div",{"data-testid":"normalTodoList",className:"todo-list flex flex-col h-full",children:[o?(0,v.jsx)(v.Fragment,{}):(0,v.jsx)(k,{title:(null===t||void 0===t?void 0:t.title)||"",plusButtonDisabled:N,onPlusClick:function(){return C(!0)}}),(0,v.jsxs)("div",{className:"flex flex-col grow",children:[n?(0,v.jsx)(v.Fragment,{children:"Oh no, there was an error"}):o?(0,v.jsx)("div",{className:"flex justify-start w-[80%] ml-4 mt-4",children:(0,v.jsx)(h.Z,{active:!0})}):null!==p&&void 0!==p&&p.length?null===p||void 0===p?void 0:p.map((function(e,t){return(0,v.jsx)(A,{todo:e,className:"".concat(M.has(e.id)&&"hidden"),onToggle:X,onDelete:W,onBlur:function(e){e.title.trim()?V(e):W(e.id)}},t)})):!N&&(0,v.jsx)(S,{text:"",onClick:function(){return C(!0)}}),N?(0,v.jsx)(A,{todo:{id:"123",title:"",completed:!1,listId:d},showNewTodo:N,onBlur:function(e){if(e.title.trim()){e.id;var t=(0,y.Z)(e,T);K(t),j((function(t){return[].concat((0,b.Z)(t),[e])}))}C(!1)}}):!(null===p||void 0===p||!p.length)&&(0,v.jsx)(S,{text:"",onClick:function(){return C(!0)}})]})]})},I=function(e){var t,n=e.result,o=u((function(e){return e.list})).selectedListId,d=(0,l.useState)(new Set),f=(0,s.Z)(d,2),x=f[0],m=f[1],h=c.k.useUpdateTodoMutation(),p=(0,s.Z)(h,2),j=p[0],Z=p[1],g=(Z.isLoading,Z.isError,c.k.useDeleteTodoMutation()),w=(0,s.Z)(g,2),N=w[0],b=w[1],y=(b.isLoading,b.isError,a.Z.useLazyGetListByIdQuery()),C=(0,s.Z)(y,1)[0],L=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m((function(e){return e.add(t)})),e.next=4,N(t);case 4:C(o),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),M=function(e){j({id:e.id,completed:e.completed})};return(0,v.jsxs)("div",{children:[(0,v.jsx)(k,{title:n.title}),(0,v.jsx)("div",{className:"flex flex-col grow",children:null===(t=n.todo)||void 0===t?void 0:t.map((function(e,t){return(0,v.jsx)(A,{todo:e,className:"".concat(x.has(e.id)&&"hidden"),onToggle:M,onDelete:E,onBlur:function(e){e.title.trim()?L(e):E(e.id)}},e.id)}))})]})},O=function(e){var t=e.keyword,n=(0,l.useState)([]),o=(0,s.Z)(n,2),a=o[0],d=o[1],u=c.k.useLazySearchQuery(),f=(0,s.Z)(u,2),x=f[0],j=f[1],Z=j.isError,g=j.isFetching,w=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.trim()){e.next=5;break}return e.next=3,x(t).unwrap();case 3:n=e.sent,d(n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){w(t)}),[t]),(0,v.jsx)("div",{"data-testid":"searchResult",children:Z?(0,v.jsx)(v.Fragment,{}):g?(0,v.jsx)("div",{className:"flex justify-start w-[80%] ml-4 mt-4",children:(0,v.jsx)(h.Z,{active:!0})}):a.map((function(e){return(0,v.jsxs)("div",{children:[(0,v.jsx)(I,{result:(0,m.Z)({},e)}),(0,v.jsx)(p.Z,{className:"my-2"})]},e.id)}))})},F=z,D=n(765);var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0,r=(0,l.useRef)(!0),i=(0,l.useRef)();(0,l.useEffect)((function(){return r.current?r.current=!1:(clearTimeout(i.current),i.current=setTimeout(e,t)),function(){clearTimeout(i.current)}}),[].concat((0,b.Z)(n),[t]))},H=function(e){var t=e.onChange,n=u((function(e){return e.todo})).mode,r=(0,l.useState)(""),i=(0,s.Z)(r,2),o=i[0],a=i[1];return(0,l.useEffect)((function(){n===g.Z.NORMAL&&a("")}),[n]),P((function(){t(o)}),250,[o]),(0,v.jsx)("div",{children:(0,v.jsx)("div",{children:(0,v.jsx)(E.Z,{value:o,className:"rounded-[12px]",prefix:(0,v.jsx)(D.Z,{}),onChange:function(e){return a(e.target.value)}})})})};var Q=function(){var e,t,n=d(),m=u((function(e){return e.todo})).mode,h=u((function(e){return e.list})).selectedListId,p=(0,l.useState)(""),j=(0,s.Z)(p,2),Z=j[0],w=j[1],b=c.k.useLazyGetAllQuery(),y=(0,s.Z)(b,2),C=y[0],L=y[1],k=L.data,E=L.isError,M=L.isLoading,B=(0,l.useState)(null===k||void 0===k?void 0:k.data.todo[h]),R=(0,s.Z)(B,2),A=R[0],S=R[1];(0,l.useEffect)((function(){n((0,f.PM)(g.Z.NORMAL)),C()}),[]),(0,l.useEffect)((function(){h&&S(null===k||void 0===k?void 0:k.data.todo[h])}),[h,k]);var T=a.Z.endpoints.getListById.select(h),z=(0,o.v9)(T),I=null===z||void 0===z||null===(e=z.data)||void 0===e?void 0:e.data;(0,l.useEffect)((function(){S({title:null===I||void 0===I?void 0:I.title,todo:null===I||void 0===I?void 0:I.todos})}),[I]);var D=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n((0,f.PM)(t?g.Z.SEARCH:g.Z.NORMAL)),t.trim()){e.next=3;break}return e.abrupt("return");case 3:w(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"home--root h-screen flex flex-col",children:[(0,v.jsx)(x,{}),(0,v.jsxs)("div",{className:"main-view flex grow",children:[(0,v.jsxs)("div",{className:"w-[335px] bg-bg-gray2",children:[(0,v.jsx)("div",{className:"px-3 pt-3",children:(0,v.jsx)(H,{onChange:D})}),(0,v.jsx)(N,{isError:E,isLoading:M,data:null===k||void 0===k||null===(t=k.data)||void 0===t?void 0:t.list})]}),(0,v.jsx)("div",{className:"grow",children:m===g.Z.NORMAL?(0,v.jsx)(F,{isError:E,isLoading:M,data:A}):(0,v.jsxs)("div",{className:"todo-list flex flex-col h-full",children:[(0,v.jsxs)("div",{className:"text-title-4 text-primary-gray1 ml-6",children:['Results for "',Z,'"']}),(0,v.jsx)(O,{keyword:Z})]})})]})]})}}}]);