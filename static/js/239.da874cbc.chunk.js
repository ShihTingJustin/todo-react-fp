"use strict";(self.webpackChunktodo_react_fp=self.webpackChunktodo_react_fp||[]).push([[239],{4239:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var i=n(4165),r=n(5861),s=n(4925),l=n(9439),o=n(7313),a=n(3709),c=n(4990),d=n(177),u=function(){return(0,a.I0)()},f=a.v9,v=n(4335),x=n(6417),m=function(){return(0,x.jsxs)("div",{"data-testid":"toolbar",className:"w-full flex justify-between items-center bg-bg-gray1 border-b border-solid border-border-gray1 h-11",children:[(0,x.jsx)("div",{className:"pl-8 py-4",children:(0,x.jsx)("div",{className:"text-title-1 text-primary-blue",children:"TodoLists"})}),(0,x.jsx)("div",{})]})},h=n(1413),p=n(627),j=n(6155),Z=n(7208),g=function(){return(0,x.jsx)("svg",{viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",className:"reminder-list-icon",children:(0,x.jsx)("path",{d:"M18.344 25.056a2.579 2.579 0 002.57-2.57c0-1.414-1.157-2.586-2.57-2.586-1.413 0-2.57 1.172-2.57 2.585a2.579 2.579 0 002.57 2.57zm28.018-.707a1.854 1.854 0 001.864-1.864 1.845 1.845 0 00-1.864-1.864H26.175a1.845 1.845 0 00-1.863 1.864c0 1.037.811 1.864 1.863 1.864h20.187zM18.344 34.57a2.579 2.579 0 002.57-2.57 2.579 2.579 0 00-2.57-2.57 2.579 2.579 0 00-2.57 2.57 2.579 2.579 0 002.57 2.57zm28.018-.706A1.845 1.845 0 0048.226 32a1.845 1.845 0 00-1.864-1.864H26.175A1.845 1.845 0 0024.312 32c0 1.037.811 1.864 1.863 1.864h20.187zM18.344 44.1a2.579 2.579 0 002.57-2.57c0-1.413-1.157-2.586-2.57-2.586-1.413 0-2.57 1.173-2.57 2.586a2.579 2.579 0 002.57 2.57zm28.018-.706a1.854 1.854 0 001.864-1.864 1.845 1.845 0 00-1.864-1.864H26.175a1.845 1.845 0 00-1.863 1.864c0 1.037.811 1.864 1.863 1.864h20.187z",fill:"#fff",fillRule:"nonzero"})})},w=n(2290),N=function(e){var t=e.id,n=e.title,i=(e.icon,e.incompleteTodoAmount),r=f((function(e){return e.list})).selectedListId,s=(0,o.useState)(i),d=(0,l.Z)(s,2),u=d[0],v=d[1],m=c.Z.endpoints.getListById.select(r),h=(0,a.v9)(m);return(0,o.useEffect)((function(){if(h){var e,n,i=(null===h||void 0===h||null===(e=h.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.incompleteTodoAmount)||0;h.isSuccess&&t===h.data.data.id&&u!==i&&v(i)}}),[h,t,u]),(0,x.jsx)("div",{className:"todo-list-menu-item pl-3 h-[3.5rem] flex items-center",role:"listbox",children:(0,x.jsxs)("div",{className:"todo-list-menu-item-content flex items-center w-full",children:[(0,x.jsx)("div",{className:"min-w-[2rem] min-h-[2rem] bg-icon-blue1 rounded-full",children:(0,x.jsx)(g,{})}),(0,x.jsxs)("div",{className:"content-wrap w-full ml-4 flex items-center justify-between",children:[(0,x.jsx)("div",{className:"title-container",children:(0,x.jsx)("div",{className:"title",children:(0,x.jsx)("div",{className:"inline-editable",children:(0,x.jsx)("div",{className:"inline-editable-label text-title-3",role:"textbox",children:n})})})}),(0,x.jsx)("div",{className:"count mr-5",children:u})]})]})})},b=function(e){var t=e.isError,n=e.isLoading,i=e.data,r=u(),s=f((function(e){return e.list})).selectedListId,a=f((function(e){return e.todo})).mode,d=c.Z.useLazyGetListByIdQuery(),m=(0,l.Z)(d,1)[0];return(0,o.useEffect)((function(){var e,t;!s&&null!==i&&void 0!==i&&null!==(e=i[0])&&void 0!==e&&e.id&&a===w.Z.NORMAL&&r((0,Z.cO)(null===i||void 0===i||null===(t=i[0])||void 0===t?void 0:t.id))}),[s,i,a,r]),(0,x.jsx)("div",{className:"scrollable-area px-3 pt-3",children:(0,x.jsx)("div",{className:"todo-list-menu rounded-[12px] overflow-hidden bg-bg-white1",role:"menu",children:t?(0,x.jsx)(x.Fragment,{children:"Oh no, there was an error"}):n?(0,x.jsx)("div",{className:"p-6",children:(0,x.jsx)(p.Z,{active:!0})}):null!==i&&void 0!==i&&i.length?null===i||void 0===i?void 0:i.map((function(e,t){return(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{onClick:function(){a===w.Z.SEARCH&&r((0,v.PM)(w.Z.NORMAL)),r((0,Z.cO)(e.id)),m(e.id)},"data-selected":a===w.Z.NORMAL&&s===e.id,children:(0,x.jsx)(N,(0,h.Z)({},e))}),(null===i||void 0===i?void 0:i.length)!==t+1&&(0,x.jsx)(j.Z,{className:"m-0 ml-6"})]},e.id)})):(0,x.jsx)(x.Fragment,{})})})},y=n(3433),C=n(4214),L=function(e){var t=e.fill;return(0,x.jsx)("svg",{viewBox:"0 0 80.567626953125 80.6142578125",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"rm-new-reminder-icon glyph-box","aria-hidden":"true",fill:t,children:(0,x.jsx)("g",{transform:"matrix(1 0 0 1 -12.4511572265626 75.537109375)",children:(0,x.jsx)("path",{d:"M12.4512-35.2539C12.4512-32.8613 14.4531-30.9082 16.7969-30.9082L48.3887-30.9082L48.3887 0.683594C48.3887 3.02734 50.3418 5.0293 52.7344 5.0293C55.127 5.0293 57.1289 3.02734 57.1289 0.683594L57.1289-30.9082L88.6719-30.9082C91.0156-30.9082 93.0176-32.8613 93.0176-35.2539C93.0176-37.6465 91.0156-39.6484 88.6719-39.6484L57.1289-39.6484L57.1289-71.1914C57.1289-73.5352 55.127-75.5371 52.7344-75.5371C50.3418-75.5371 48.3887-73.5352 48.3887-71.1914L48.3887-39.6484L16.7969-39.6484C14.4531-39.6484 12.4512-37.6465 12.4512-35.2539Z"})})})},k=function(e){var t=e.title,n=void 0===t?"list title":t,i=e.plusButtonDisabled,r=void 0!==i&&i,s=e.onPlusClick,l=void 0===s?function(){}:s,o=(e.onMoreClick,f((function(e){return e.todo})).mode);return(0,x.jsxs)("div",{"data-testid":"todoListHeader",className:"flex justify-between items-center pl-6 pr-5 h-[3.125rem]",children:[(0,x.jsx)("div",{className:"text-title-2 text-primary-blue h-[2.625rem]",children:n}),(0,x.jsx)("div",{className:"right-wrap",children:o===w.Z.NORMAL&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(C.Z,{className:"mr-6",size:"small",shape:"circle",type:"text",disabled:r,"data-disabled":r,icon:(0,x.jsx)(L,{fill:"#0071EB"}),onClick:l})})})]})},E=n(2516),M=n(1829),B=function(e){var t=e.fill;return(0,x.jsx)("svg",{viewBox:"0 0 99.6099853515625 99.6572265625",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"glyph-box",role:"presentation",fill:t,children:(0,x.jsx)("g",{transform:"matrix(1 0 0 1 -8.740039062500045 85.05859375)",children:(0,x.jsx)("path",{d:"M58.5449 14.5508C85.791 14.5508 108.35-8.05664 108.35-35.2539C108.35-62.5 85.7422-85.0586 58.4961-85.0586C31.2988-85.0586 8.74023-62.5 8.74023-35.2539C8.74023-8.05664 31.3477 14.5508 58.5449 14.5508ZM58.5449 6.25C35.498 6.25 17.0898-12.207 17.0898-35.2539C17.0898-58.3008 35.4492-76.7578 58.4961-76.7578C81.543-76.7578 100-58.3008 100.049-35.2539C100.098-12.207 81.5918 6.25 58.5449 6.25Z"})})})},R=function(e){var t=e.fill;return(0,x.jsx)("svg",{viewBox:"0 0 99.6099853515625 99.6572265625",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"glyph-box",role:"presentation",fill:t,children:(0,x.jsx)("g",{transform:"matrix(1 0 0 1 -8.740039062500045 85.05859375)",children:(0,x.jsx)("path",{d:"M58.5449 14.5508C85.791 14.5508 108.35-8.05664 108.35-35.2539C108.35-62.5 85.7422-85.0586 58.4961-85.0586C31.2988-85.0586 8.74023-62.5 8.74023-35.2539C8.74023-8.05664 31.3477 14.5508 58.5449 14.5508ZM58.5449 6.25C35.498 6.25 17.0898-12.207 17.0898-35.2539C17.0898-58.3008 35.4492-76.7578 58.4961-76.7578C81.543-76.7578 100-58.3008 100.049-35.2539C100.098-12.207 81.5918 6.25 58.5449 6.25ZM58.4473-1.17188C77.4414-1.17188 92.5781-16.3574 92.5293-35.3027C92.4805-54.1992 77.3438-69.3848 58.3984-69.3848C39.4531-69.3848 24.4141-54.248 24.4141-35.3027C24.4141-16.3086 39.502-1.17188 58.4473-1.17188Z"})})})},T=function(e){var t=e.todo,n=e.onToggle,i=e.onBlur,r=e.onDelete,s=(e.onPressEnter,e.showNewTodo),a=e.className,c=(0,o.useRef)(null),d=(0,o.useState)(t),u=(0,l.Z)(d,2),f=u[0],v=u[1];(0,o.useEffect)((function(){v(t)}),[t]),(0,o.useEffect)((function(){if(s){var e=c.current;null===e||void 0===e||e.focus()}}),[s]);return(0,x.jsx)("div",{"data-testid":"todoItem",tabIndex:0,className:'"rowgroup" '.concat(a),children:(0,x.jsxs)("div",{className:"content flex items-center py-3 pr-5 pl-6 w-full",children:[(0,x.jsxs)("div",{className:"mr-3",children:[(0,x.jsx)(E.Z,{id:f.id,className:"toggle hidden",type:"checkbox",checked:f.completed}),(0,x.jsx)("label",{htmlFor:f.id,onClick:function(){var e=(0,h.Z)((0,h.Z)({},t),{},{completed:!t.completed});null===n||void 0===n||n(e)},children:(0,x.jsx)("div",{className:"w-[1.375rem] h-[1.375rem]",children:f.completed?(0,x.jsx)(R,{fill:"#0071EB"}):(0,x.jsx)(B,{fill:"#c4c4c6"})})})]}),(0,x.jsx)("div",{className:"todo-item w-full",children:(0,x.jsxs)("div",{className:"flex items-center w-full border-b border-border-gray2",children:[(null===t||void 0===t?void 0:t.priority)&&(0,x.jsx)("div",{children:"!"}),(0,x.jsx)(E.Z,{ref:c,value:f.title,className:"edit w-full text-content-1 ".concat(f.completed&&"text-border-gray1"),bordered:!1,onBlur:function(e){null===i||void 0===i||i((0,h.Z)((0,h.Z)({},t),{},{title:e.target.value}))},onChange:function(e){v((function(t){return(0,h.Z)((0,h.Z)({},t),{},{title:e.target.value})}))},onPressEnter:function(){var e;null===(e=c.current)||void 0===e||e.blur()}}),!s&&(0,x.jsx)("div",{className:"delete-button px-3 py-1 cursor-pointer",onClick:function(){return null===r||void 0===r?void 0:r(f.id)},children:(0,x.jsx)(M.Z,{})})]})})]})})},z=function(e){var t=e.text,n=e.onClick;return(0,x.jsx)("div",{"data-testid":"blank",className:"flex flex-col grow justify-center items-center",onClick:n,children:(0,x.jsx)("div",{children:t})})},A=["id"],S=function(e){var t=e.data,n=e.isError,a=e.isLoading,u=f((function(e){return e.list})).selectedListId,v=f((function(e){return e.todo})).mode,m=(0,o.useState)([]),h=(0,l.Z)(m,2),j=h[0],Z=h[1],g=(0,o.useState)(!1),N=(0,l.Z)(g,2),b=N[0],C=N[1],L=(0,o.useState)(new Set),E=(0,l.Z)(L,2),M=E[0],B=E[1],R=d.k.useCreateTodoMutation(),S=(0,l.Z)(R,2),I=S[0],O=S[1],F=(O.isLoading,O.isError,d.k.useUpdateTodoMutation()),D=(0,l.Z)(F,2),P=D[0],H=D[1],Q=(H.isLoading,H.isError,d.k.useDeleteTodoMutation()),G=(0,l.Z)(Q,2),U=G[0],_=G[1],q=(_.isLoading,_.isError,c.Z.useLazyGetListByIdQuery()),J=(0,l.Z)(q,1)[0];(0,o.useEffect)((function(){v===w.Z.NORMAL&&u&&J(u)}),[v]),(0,o.useEffect)((function(){Z((null===t||void 0===t?void 0:t.todo)||[])}),[t]);var K=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.title.trim()){e.next=3;break}return e.abrupt("return");case 3:return C(!1),e.next=6,I(t);case 6:J(u),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t),J(u);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B((function(e){return e.add(t)})),e.next=4,U(t);case 4:J(u),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),X=function(e){P({id:e.id,completed:e.completed}),J(u)};return(0,x.jsxs)("div",{"data-testid":"normalTodoList",className:"todo-list flex flex-col h-full",children:[a?(0,x.jsx)(x.Fragment,{}):(0,x.jsx)(k,{title:(null===t||void 0===t?void 0:t.title)||"",plusButtonDisabled:b,onPlusClick:function(){return C(!0)}}),(0,x.jsxs)("div",{className:"flex flex-col grow",children:[n?(0,x.jsx)(x.Fragment,{children:"Oh no, there was an error"}):a?(0,x.jsx)("div",{className:"flex justify-start w-[80%] ml-4 mt-4",children:(0,x.jsx)(p.Z,{active:!0})}):null!==j&&void 0!==j&&j.length?null===j||void 0===j?void 0:j.map((function(e,t){return(0,x.jsx)(T,{todo:e,className:"".concat(M.has(e.id)&&"hidden"),onToggle:X,onDelete:W,onBlur:function(e){e.title.trim()?V(e):W(e.id)}},t)})):!b&&(0,x.jsx)(z,{text:"",onClick:function(){return C(!0)}}),b?(0,x.jsx)(T,{todo:{id:"123",title:"",completed:!1,listId:u},showNewTodo:b,onBlur:function(e){if(e.title.trim()){e.id;var t=(0,s.Z)(e,A);K(t),Z((function(t){return[].concat((0,y.Z)(t),[e])}))}C(!1)}}):!(null===j||void 0===j||!j.length)&&(0,x.jsx)(z,{text:"",onClick:function(){return C(!0)}})]})]})},I=function(e){var t,n=e.result,s=f((function(e){return e.list})).selectedListId,a=(0,o.useState)(new Set),u=(0,l.Z)(a,2),v=u[0],m=u[1],h=d.k.useUpdateTodoMutation(),p=(0,l.Z)(h,2),j=p[0],Z=p[1],g=(Z.isLoading,Z.isError,d.k.useDeleteTodoMutation()),w=(0,l.Z)(g,2),N=w[0],b=w[1],y=(b.isLoading,b.isError,c.Z.useLazyGetListByIdQuery()),C=(0,l.Z)(y,1)[0],L=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m((function(e){return e.add(t)})),e.next=4,N(t);case 4:C(s),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),M=function(e){j({id:e.id,completed:e.completed})};return(0,x.jsxs)("div",{children:[(0,x.jsx)(k,{title:n.title}),(0,x.jsx)("div",{className:"flex flex-col grow",children:null===(t=n.todo)||void 0===t?void 0:t.map((function(e,t){return(0,x.jsx)(T,{todo:e,className:"".concat(v.has(e.id)&&"hidden"),onToggle:M,onDelete:E,onBlur:function(e){e.title.trim()?L(e):E(e.id)}},e.id)}))})]})},O=function(e){var t=e.keyword,n=(0,o.useState)([]),s=(0,l.Z)(n,2),a=s[0],c=s[1],u=d.k.useLazySearchQuery(),f=(0,l.Z)(u,2),v=f[0],m=f[1],Z=m.isError,g=m.isFetching,w=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.trim()){e.next=5;break}return e.next=3,v(t).unwrap();case 3:n=e.sent,c(n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){w(t)}),[t]),(0,x.jsx)("div",{"data-testid":"searchResult",children:Z?(0,x.jsx)(x.Fragment,{}):g?(0,x.jsx)("div",{className:"flex justify-start w-[80%] ml-4 mt-4",children:(0,x.jsx)(p.Z,{active:!0})}):a.map((function(e){return(0,x.jsxs)("div",{children:[(0,x.jsx)(I,{result:(0,h.Z)({},e)}),(0,x.jsx)(j.Z,{className:"my-2"})]},e.id)}))})},F=S,D=n(765);var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2?arguments[2]:void 0,i=(0,o.useRef)(!0),r=(0,o.useRef)();(0,o.useEffect)((function(){return i.current?i.current=!1:(clearTimeout(r.current),r.current=setTimeout(e,t)),function(){clearTimeout(r.current)}}),[].concat((0,y.Z)(n),[t]))},H=function(e){var t=e.onChange,n=f((function(e){return e.todo})).mode,i=(0,o.useState)(""),r=(0,l.Z)(i,2),s=r[0],a=r[1];return(0,o.useEffect)((function(){n===w.Z.NORMAL&&a("")}),[n]),P((function(){t(s)}),250,[s]),(0,x.jsx)("div",{children:(0,x.jsx)("div",{children:(0,x.jsx)(E.Z,{value:s,className:"rounded-[12px]",prefix:(0,x.jsx)(D.Z,{}),onChange:function(e){return a(e.target.value)}})})})},Q=["id"];var G=function(){var e,t,n=u(),h=f((function(e){return e.todo})).mode,p=f((function(e){return e.list})).selectedListId,j=(0,o.useState)(""),Z=(0,l.Z)(j,2),g=Z[0],N=Z[1],y=d.k.useLazyGetAllQuery(),C=(0,l.Z)(y,2),L=C[0],k=C[1],E=k.data,M=k.isError,B=k.isLoading,R=(0,o.useState)((null===E||void 0===E?void 0:E.data.todo[p])||{title:"",todo:[]}),T=(0,l.Z)(R,2),z=T[0],A=T[1];(0,o.useEffect)((function(){n((0,v.PM)(w.Z.NORMAL)),L()}),[]);var S=c.Z.useLazyGetListByIdQuery(),I=(0,l.Z)(S,1)[0],D=c.Z.endpoints.getListById.select(p),P=(0,a.v9)(D);(0,o.useEffect)((function(){p&&(P.isUninitialized&&null!==E&&void 0!==E&&E.data.todo[p]?A(null===E||void 0===E?void 0:E.data.todo[p]):I(p))}),[I,P.isUninitialized,p,E]),(0,o.useEffect)((function(){var e;if(null!==P&&void 0!==P&&null!==(e=P.data)&&void 0!==e&&e.data){var t,n=null===P||void 0===P||null===(t=P.data)||void 0===t?void 0:t.data,i=(n.id,(0,s.Z)(n,Q));i&&A(i)}}),[null===P||void 0===P||null===(e=P.data)||void 0===e?void 0:e.data]);var G=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n((0,v.PM)(t?w.Z.SEARCH:w.Z.NORMAL)),t.trim()){e.next=3;break}return e.abrupt("return");case 3:N(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"home--root h-screen flex flex-col",children:[(0,x.jsx)(m,{}),(0,x.jsxs)("div",{className:"main-view flex grow",children:[(0,x.jsxs)("div",{className:"w-[335px] bg-bg-gray2",children:[(0,x.jsx)("div",{className:"px-3 pt-3",children:(0,x.jsx)(H,{onChange:G})}),(0,x.jsx)(b,{isError:M,isLoading:B,data:null===E||void 0===E||null===(t=E.data)||void 0===t?void 0:t.list})]}),(0,x.jsx)("div",{className:"grow",children:h===w.Z.NORMAL?(0,x.jsx)(F,{isError:M,isLoading:B,data:z}):(0,x.jsxs)("div",{className:"todo-list flex flex-col h-full",children:[(0,x.jsxs)("div",{className:"text-title-4 text-primary-gray1 ml-6",children:['Results for "',g,'"']}),(0,x.jsx)(O,{keyword:g})]})})]})]})}}}]);